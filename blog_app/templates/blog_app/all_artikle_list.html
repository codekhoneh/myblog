{% extends 'base.html' %}
{% load static %}
{% load render_partial %}
{% block title %}
 All Artikle List
{% endblock %}
{% block content %}
<style>
.all-blog-posts { 
  display:flex; 
  flex-wrap:wrap; 
  justify-content:center; 
}

.card-title a { text-decoration:none; }
.card-title a:hover { text-decoration:underline; color:#0d6efd; }
.badge { font-size:0.75rem; }

.blog-post.card:hover { transform: translateY(-5px); box-shadow:0 6px 15px rgba(0,0,0,0.15); }

.pagination .page-item.active .page-link { 
  background-color:#0d6efd; 
  border-color:#0d6efd; 
  color:white; 
}

/* ستون جانبی راست */
.sidebar-placeholder {
  position: sticky;    /* وقتی صفحه scroll شود در بالا می‌ماند */
  top: 20px;
}
.sidebar-placeholder .bg-light {
  background-color: #f8f9fa;
}
</style>
    <!-- Page Content -->
    <!-- Banner Starts Here -->
    <div class="heading-page header-text">
      <section class="page-heading">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <div class="text-content">
                <h4>Recent Posts</h4>
                <h2>Our Recent Blog Entries</h2>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
    
    <!-- Banner Ends Here -->

    <section class="call-to-action">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="main-content">
              <div class="row">
                <div class="col-lg-8">
                  <span>Stand Blog HTML5 Template</span>
                  <h4>Creative HTML Template For Bloggers!</h4>
                </div>
                <div class="col-lg-4">
                  <div class="main-button">
                    <a href="https://templatemo.com/tm-551-stand-blog" target="_parent">Download Now!</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="blog-posts">
  <div class="container">
    <div class="row justify-content-center">

      <!-- ستون مقالات اصلی -->
      <div class="col-lg-8 col-md-8 d-flex flex-column align-items-center">
        <div class="all-blog-posts row justify-content-center w-100">

          {% for article in page_obj %}
          <div class="col-lg-6 col-md-8 mb-4">
            <div class="blog-post card" style="border-radius:15px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.1); transition: transform 0.2s;">
              
              {% if article.image %}
              <img src="{{ article.image.url }}" alt="{{ article.title }}" 
                   style="width:100%;height:250px;object-fit:cover;">
              {% endif %}

              <div class="card-body p-3">
                {% for cati in article.catg.all %}
                  <a href="#" class="badge bg-primary text-white me-1">{{ cati.title }}</a>
                {% endfor %}

                <h4 class="card-title mt-2"><a href="#" class="text-dark">{{ article.title }}</a></h4>

                <ul class="post-info list-inline mb-2 text-muted">
                  <li class="list-inline-item"><i class="fa fa-user"></i> {{ article.author.username }}</li>
                  <li class="list-inline-item"><i class="fa fa-calendar"></i> {{ article.created|date:"Y-m-d" }}</li>
                </ul>

               
              </div>
            </div>
          </div>
          {% empty %}
          <p>هیچ مقاله‌ای یافت نشد.</p>
          {% endfor %}

        </div>

        <!-- Pagination زیر کارت‌ها -->
        <div class="mt-3">
          {% if page_obj.has_other_pages %}
          <ul class="pagination justify-content-center">

            {% if page_obj.has_previous %}
            <li class="page-item">
              <a class="page-link" href="?q={{ query }}&page={{ page_obj.previous_page_number }}">&laquo; قبلی</a>
            </li>
            {% endif %}

            {% for p in page_obj.paginator.page_range %}
            {% if page_obj.number == p %}
            <li class="page-item active">
              <a class="page-link" href="?q={{ query }}&page={{ p }}">{{ p }}</a>
            </li>
            {% else %}
            <li class="page-item">
              <a class="page-link" href="?q={{ query }}&page={{ p }}">{{ p }}</a>
            </li>
            {% endif %}
            {% endfor %}

            {% if page_obj.has_next %}
            <li class="page-item">
              <a class="page-link" href="?q={{ query }}&page={{ page_obj.next_page_number }}">بعدی &raquo;</a>
            </li>
            {% endif %}

          </ul>
          {% endif %}
        </div>
      </div>

      <!-- ستون جانبی راست -->
       <div class="col-lg-4">
            <div class="sidebar">
              <div class="row">
                <div class="col-lg-12">
                  <div class="sidebar-item search">
                    <form id="search_form" name="gs" method="GET" action="{% url 'blog:search_articles' %}">
                      <input type="text" name="q" class="searchText" placeholder="type to search..." autocomplete="on">
                    </form>
                  </div>
                </div>
      <div class="col-lg-4 col-md-4">
        <div class="sidebar-placeholder">

          <!-- باکس محبوب‌ترین مقالات -->
         <div class="sidebar-item recent-posts mb-3">
            <div class="sidebar-heading">
              <h2>Recent Posts</h2>
            </div>
            <div class="content">
              <ul>
                {% for j in recent_art %}
                <li>
                  <a href="{{ j.get_absolute_url }}" class="nav-link"><h4>{{ j.title }}</h4></a>
                  <span>seen: {{ j.views }}</span>
                </li>
                {% endfor %}
              </ul>
            </div>
          </div>

          <!-- باکس دسته‌بندی‌ها -->
           <div class="sidebar-item categories mb-3">
            <div class="sidebar-heading">
              <h2>Categories</h2>
            </div>
            <div class="content">
              <ul dir="rtl">
                {% for c in cati %}
                <li><a href="{% url 'blog:categor_detail' c.id %}">- {{ c.title }}</a></li>
                {% endfor %}
              </ul>
            </div>
          </div>
         

        </div>
      </div>

    </div>
  </div>
</section>





  
{% endblock %}

