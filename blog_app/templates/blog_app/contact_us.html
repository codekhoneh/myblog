{% extends 'base.html' %}
{% load static %}
{% load render_partial %}

{% block content %}
    <style>
      /* Ensure inputs in the contact form are not forced to uppercase by global CSS */
      .sidebar-item.contact-form form input,
      .sidebar-item.contact-form form textarea,
      .sidebar-item.contact-form form select {
        text-transform: none !important;
      }
      /* Radio alignment and spacing: place radio input directly next to label text with extra gap */
      .sidebar-item.contact-form .form-check {
        display: flex;
        align-items: center;
        gap: 0.9rem; /* increased space between radio and text */
        margin-bottom: 0.45rem;
      }
      .sidebar-item.contact-form .form-check-input {
        /* ensure consistent placement and no extra browser margin */
        margin: 0;
        flex: 0 0 auto;
      }
      .sidebar-item.contact-form .form-check-label {
        margin: 0;
        line-height: 1.2;
      }
      /* If your site uses RTL, keep the radio visually next to its label by forcing inline direction */
      .sidebar-item.contact-form .form-check { direction: ltr; }
      .sidebar-item.contact-form .form-check-label { direction: rtl; }
    </style>
    <!-- Page Content -->
    <!-- Banner Starts Here -->
    <div class="heading-page header-text">
      <section class="page-heading">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <div class="text-content">
                <h4>contact us</h4>
                <h2>let’s stay in touch!</h2>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
    
    <!-- Banner Ends Here -->


    <section class="contact-us">
      <div class="container">
        <div class="row">
        
          <div class="col-lg-12">
            <div class="down-contact">
              <div class="row">
                <div class="col-lg-8">
                  <div class="sidebar-item contact-form">
                    <div class="sidebar-heading">
                      <h2>Send us a message</h2>
                    </div>
                    <div class="content">
                      {# Show the form to everyone, but only allow sending for authenticated users #}
                      <form id="contact" action="" method="post">
                          {% csrf_token %}
                        <div class="row">
                          <div class="col-md-6 col-sm-12">
                          {% if success %}
                              <div class="alert alert-success">پیام با موفقیت ارسال شد.</div>
                          {% endif %}

                          {# show server-side warning when anonymous tried to post #}
                          {% if not_allowed %}
                            <div class="alert alert-warning">برای ارسال پیام ابتدا باید وارد سایت شوید. <a href="{% url 'account:login' %}?next={% url 'blog:contact_us' %}">ورود</a> / <a href="{% url 'account:register' %}">ثبت نام</a></div>
                          {% endif %}

                          {{ myform.non_field_errors }}

                          <div class="form-group">
                            {{ myform.name.label_tag }}
                            {{ myform.name }}
                            {% if myform.name.errors %}
                              <div class="alrt alert-danger">{{ myform.name.errors }}</div>
                            {% endif %}
                          </div>
                          
                          <div class="form-group">
                            {{ myform.email.label_tag }}
                            {{ myform.email }}
                            {% if myform.email.errors %}
                              <div class="alrt alert-danger">{{ myform.email.errors }}</div>
                            {% endif %}
                          </div>

                          <div class="form-group">
                            {{ myform.text.label_tag }}
                            {{ myform.text }}
                            {% if myform.text.errors %}
                              <div class="alrt alert-danger">{{ myform.text.errors }}</div>
                            {% endif %}
                          </div>

                          <div class="form-group">
                            <label>{{ myform.source.label }}</label>
                            <p>--- How did you hear about us? ---</p>
                            <br>
                            <div>
                              {# Render radios with input before the label text #}
                              {% for val, label in myform.source.field.choices %}
                                <div class="form-check">
                                  
                                  <input class="form-check-input" type="radio" name="{{ myform.source.html_name }}" id="id_{{ myform.source.html_name }}_{{ forloop.counter0 }}" value="{{ val }}" {% if val == myform.source.value %}checked{% endif %}>
                                  <label class="form-check-label" for="id_{{ myform.source.html_name }}_{{ forloop.counter0 }}">{{ label }}</label>
                                </div>
                              {% endfor %}
                            </div>
                            {% if myform.source.errors %}
                              <div class="alrt alert-danger">{{ myform.source.errors }}</div>
                            {% endif %}
                          </div>

                          <br>
                          
                          <div class="form-group">
                            {{ myform.birth_year.label_tag }}
                            {{ myform.birth_year }}
                            {% if myform.birth_year.errors %}
                              <div class="alrt alert-danger">{{ myform.birth_year.errors }}</div>
                            {% endif %}
                          </div>

                          <div class="col-lg-12">
                            <fieldset>
                              {% if user.is_authenticated %}
                                <button type="submit" id="form-submit" class="main-button">Send Message</button>
                              {% else %}
                                <button type="button" class="main-button" disabled>Send Message</button>
                                <br>
                                <h4 class="d-block mt-2">برای ارسال پیام ابتدا باید <a style='color:red;' href="{% url 'account:login' %}?next={% url 'blog:contact_us' %}" >وارد شوید</a> یا <a style='color:red;' href="{% url 'account:register' %}">ثبت نام</a> کنید.</h4>
                              {% endif %}
                            </fieldset>
                          </div>
                       
                        </div>

                      </form>
                    </div>
                  </div>
                </div>
                <br>
                <div class="col-lg-4">
                  <div class="sidebar-item contact-information">
                    <div class="sidebar-heading">
                      <h2>contact information</h2>
                    </div>
                    <div class="content">
                      <ul>
                        <li>
                          <h5>090-484-8080</h5>
                          <span>PHONE NUMBER</span>
                        </li>
                        <li>
                          <h5>info@company.com</h5>
                          <span>EMAIL ADDRESS</span>
                        </li>
                        <li>
                          <h5>123 Aenean id posuere dui, 
                          	<br>Praesent laoreet 10660</h5>
                          <span>STREET ADDRESS</span>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-12">
            <div id="map">
              <iframe src="https://maps.google.com/maps?q=Av.+L%C3%BAcio+Costa,+Rio+de+Janeiro+-+RJ,+Brazil&t=&z=13&ie=UTF8&iwloc=&output=embed" width="100%" height="450px" frameborder="0" style="border:0" allowfullscreen></iframe>
            </div>
          </div>
          
        </div>
      </div>
    </section>

{% endblock %}
